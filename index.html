<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#1e40af" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>ğŸ§  Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø¬Ù…Ù‘Ø¹</title>
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://cdn.iconscout.com/icon/free/png-256/ai-3600893-3007881.png" />
  <link rel="apple-touch-icon" href="https://cdn.iconscout.com/icon/free/png-512/ai-3600893-3007881.png">
  
  <!-- Ø®Ø· Ø§Ù„ÙŠØ¯ Ø§Ù„Ù…Ù†Ø­Ù†ÙŠ -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #1e40af;
      --primary-dark: #1d4ed8;
      --secondary: #0ea5e9;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --light: #f8fafc;
      --dark: #0f172a;
      --gray: #64748b;
      --border-radius: 16px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    
    body {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      color: var(--dark);
      font-family: 'Tajawal', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      min-height: 100vh;
      padding: 0;
      margin: 0;
      overflow-x: hidden;
    }
    
    .container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      max-width: 100%;
    }
    
    /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ (AppBar) */
    .app-bar {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      color: white;
      padding: 0.8rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .app-title {
      font-family: 'Dancing Script', cursive;
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
      letter-spacing: 0.05em;
    }
    
    .settings-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .settings-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }
    
    /* Ù…Ù†Ø·Ù‚Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
    .content {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    
    /* Ø¨Ø·Ø§Ù‚Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
    .message-card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-lg);
      padding: 1.2rem;
      transition: transform 0.2s ease;
      border-left: 4px solid var(--primary);
      position: relative;
    }
    
    .message-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }
    
    .model-icon {
      font-size: 1.5rem;
      color: var(--primary);
    }
    
    .model-name {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--primary-dark);
    }
    
    .message-content {
      line-height: 1.7;
      color: var(--dark);
      margin-bottom: 0.5rem;
    }
    
    .message-content code {
      background: #f1f5f9;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-family: monospace;
    }
    
    .message-timestamp {
      color: var(--gray);
      font-size: 0.85rem;
      text-align: right;
      margin-top: 0.25rem;
    }
    
    /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙÙˆÙ‚ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    .model-icons-bar {
      background: white;
      padding: 0.8rem 1rem;
      border-top: 1px solid #e2e8f0;
      border-bottom: 1px solid #e2e8f0;
      display: flex;
      justify-content: center;
      gap: 1.2rem;
      position: sticky;
      bottom: 60px;
      z-index: 100;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
    }
    
    .model-icon-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.4rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .model-icon-btn.active {
      color: var(--primary);
    }
    
    .model-icon-btn:hover {
      transform: scale(1.1);
    }
    
    .model-icon-btn span {
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    .input-container {
      background: white;
      padding: 1rem;
      border-top: 1px solid #e2e8f0;
      position: sticky;
      bottom: 0;
      z-index: 100;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
    }
    
    .input-box {
      position: relative;
      display: flex;
      align-items: flex-end;
      gap: 0.75rem;
      border: 2px solid #cbd5e1;
      border-radius: var(--border-radius);
      padding: 0.5rem 1rem;
      background: #f8fafc;
    }
    
    #question-input {
      flex: 1;
      min-height: 60px;
      padding: 0.8rem 4.5rem 0.8rem 4.5rem;
      border: none;
      border-radius: var(--border-radius);
      font-family: 'Tajawal', sans-serif;
      font-size: 1rem;
      resize: none;
      transition: all 0.3s ease;
      background: transparent;
      outline: none;
    }
    
    #question-input:focus {
      box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.2);
    }
    
    .input-actions {
      position: absolute;
      left: 1rem;
      bottom: 0.75rem;
      display: flex;
      gap: 0.5rem;
    }
    
    .action-btn {
      background: rgba(30, 64, 175, 0.1);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      color: var(--primary);
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .action-btn:hover {
      background: rgba(30, 64, 175, 0.2);
      transform: scale(1.1);
    }
    
    .send-btn {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 1.4rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: absolute;
      right: 1rem;
      bottom: 0.75rem;
      z-index: 10;
    }
    
    .send-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .send-btn:active {
      transform: scale(0.95);
    }
    
    .status-bar {
      text-align: center;
      padding: 0.5rem;
      font-size: 0.85rem;
      color: var(--gray);
      background: rgba(255, 255, 255, 0.7);
      border-top: 1px solid #e2e8f0;
    }
    
    .offline-warning {
      background: #fffbeb;
      color: #b45309;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius);
      margin-top: 1rem;
      text-align: center;
      font-weight: 500;
    }
    
    @media (max-width: 600px) {
      .app-bar {
        padding: 0.7rem 0.8rem;
      }
      
      .app-title {
        font-size: 1.6rem;
      }
      
      .model-icons-bar {
        gap: 0.8rem;
      }
      
      .model-icon-btn span {
        font-size: 0.75rem;
      }
      
      #question-input {
        padding: 0.8rem 4rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø®Ø· ÙŠØ¯ -->
    <div class="app-bar">
      <div class="app-title">Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø¬Ù…Ù‘Ø¹</div>
      <button class="settings-btn" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" onclick="showSettings()">
        âš™ï¸
      </button>
    </div>
    
    <!-- Ù…Ù†Ø·Ù‚Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="content" id="results-container">
      <div class="message-card">
        <div class="message-header">
          <div class="model-icon">ğŸ§ </div>
          <div class="model-name">Qwen3</div>
        </div>
        <div class="message-content">
          Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©. Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…ØªØ§Ø­ Ù„Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯.
        </div>
        <div class="message-timestamp">10:30 Øµ</div>
      </div>
      
      <div class="message-card">
        <div class="message-header">
          <div class="model-icon">ğŸ’»</div>
          <div class="model-name">DeepSeek-Coder</div>
        </div>
        <div class="message-content">
          Ù†Ù…ÙˆØ°Ø¬ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙÙ‚Ø·. Ù…Ø«Ø§Ù„ÙŠ Ù„Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© ÙˆØ´Ø±Ø­ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯.
        </div>
        <div class="message-timestamp">10:32 Øµ</div>
      </div>
      
      <div class="message-card">
        <div class="message-header">
          <div class="model-icon">ğŸ¤–</div>
          <div class="model-name">Phi-3</div>
        </div>
        <div class="message-content">
          Ù†Ù…ÙˆØ°Ø¬ Ø®ÙÙŠÙ ÙˆØ³Ø±ÙŠØ¹ Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©. ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„.
        </div>
        <div class="message-timestamp">10:35 Øµ</div>
      </div>
      
      <div class="offline-warning" id="offline-warning">
        âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
      </div>
    </div>
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙÙˆÙ‚ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
    <div class="model-icons-bar">
      <div class="model-icon-btn active" onclick="selectModel('qwen3')">
        <div style="font-size: 2.2rem;">ğŸ§ </div>
        <span>Qwen3</span>
      </div>
      <div class="model-icon-btn" onclick="selectModel('deepseek')">
        <div style="font-size: 2.2rem;">ğŸ’»</div>
        <span>DeepSeek</span>
      </div>
      <div class="model-icon-btn" onclick="selectModel('phi3')">
        <div style="font-size: 2.2rem;">ğŸ¤–</div>
        <span>Phi-3</span>
      </div>
      <div class="model-icon-btn" onclick="compareModels()">
        <div style="font-size: 2.2rem;">ğŸ“Š</div>
        <span>Ù…Ù‚Ø§Ø±Ù†Ø©</span>
      </div>
      <div class="model-icon-btn" onclick="saveConversation()">
        <div style="font-size: 2.2rem;">ğŸ’¾</div>
        <span>Ø­ÙØ¸</span>
      </div>
    </div>
    
    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
    <div class="input-container">
      <div class="input-box">
        <div class="input-actions">
          <button class="action-btn" title="ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ" onclick="startRecording()">
            ğŸ¤
          </button>
          <button class="action-btn" title="Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù" onclick="document.getElementById('file-input').click()">
            ğŸ“
          </button>
          <input type="file" id="file-input" style="display: none;" onchange="handleFileUpload()">
        </div>
        <textarea id="question-input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ù‡Ù†Ø§..."></textarea>
        <button class="send-btn" onclick="sendQuestion()">
          â¤
        </button>
      </div>
    </div>
    
    <div class="status-bar">
      <span id="connection-status">âœ… Ù…ØªØµÙƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</span> â€¢ Ø§Ù„Ø¥ØµØ¯Ø§Ø± 1.0
    </div>
  </div>

  <script>
    // ØªØªØ¨Ø¹ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø®ØªØ§Ø±
    let selectedModel = 'qwen3';
    let isRecording = false;
    let mediaRecorder;
    let audioChunks = [];
    
    // Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…ÙˆØ°Ø¬
    function selectModel(model) {
      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚
      document.querySelectorAll('.model-icon-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯
      event.target.closest('.model-icon-btn').classList.add('active');
      selectedModel = model;
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
      const modelNames = {
        'qwen3': 'Qwen3',
        'deepseek': 'DeepSeek-Coder',
        'phi3': 'Phi-3'
      };
      
      console.log(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: ${modelNames[model]}`);
    }
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„
    function sendQuestion() {
      const question = document.getElementById('question-input').value.trim();
      
      if (!question) {
        alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„ Ø£ÙˆÙ„Ø§Ù‹');
        return;
      }
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
      addMessage(question, 'user');
      
      // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø±Ø¯ÙˆØ¯
      const models = ['qwen3', 'deepseek', 'phi3'];
      const responses = {
        'qwen3': `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ:\n\`\`\`python\n# Ù…Ø«Ø§Ù„ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…ØµÙÙˆÙØ§Øª\narr = [1, 2, 3, 4, 5]\nresult = [x*2 for x in arr]\nprint(result)  # Ø§Ù„Ù†Ø§ØªØ¬: [2, 4, 6, 8, 10]\n\`\`\`\nÙ‡Ø°Ø§ Ø­Ù„ Ø¨Ø³ÙŠØ· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Python. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‹Ø§ Ù…ÙØµÙ„Ø§Ù‹ØŸ`,
        
        'deepseek': `\`\`\`javascript\n// Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… JavaScript\nconst arr = [1, 2, 3, 4, 5];\nconst result = arr.map(x => x * 2);\nconsole.log(result); // [2, 4, 6, 8, 10]\n\`\`\`\nÙ‡Ø°Ø§ Ø§Ù„Ø­Ù„ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¯Ø§Ù„Ø© map() ÙÙŠ JavaScript. Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ÙØ¹Ø§Ù„Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© ÙˆØ§Ù„Ù…ØªÙˆØ³Ø·Ø©.`,
        
        'phi3': `Ù„Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù…:\n- Python: [x*2 for x in arr]\n- JavaScript: arr.map(x => x*2)\n- Java: Arrays.stream(arr).map(x -> x*2).toArray()\n\nÙƒÙ„ Ù„ØºØ© Ù„Ù‡Ø§ Ø·Ø±ÙŠÙ‚Ø© Ù…Ø«Ù„Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ø³ÙŠØ§Ù‚. Ø£ÙŠ Ù„ØºØ© ØªÙØ¶Ù„ØŸ`
      };
      
      // Ø¥Ø¶Ø§ÙØ© Ø±Ø¯ÙˆØ¯ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
      models.forEach(model => {
        setTimeout(() => {
          addResponse(model, responses[model]);
        }, 500 * (models.indexOf(model) + 1));
      });
      
      // Ù…Ø³Ø­ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
      document.getElementById('question-input').value = '';
      
      // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
      updateConnectionStatus();
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function addMessage(text, sender) {
      const timestamp = new Date().toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });
      
      const messageCard = document.createElement('div');
      messageCard.className = 'message-card';
      messageCard.innerHTML = `
        <div class="message-content">${text}</div>
        <div class="message-timestamp">${timestamp}</div>
      `;
      
      if (sender === 'user') {
        messageCard.style.borderLeft = '4px solid #0ea5e9';
        messageCard.style.marginLeft = 'auto';
        messageCard.style.maxWidth = '80%';
      }
      
      document.getElementById('results-container').appendChild(messageCard);
      
      // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      messageCard.scrollIntoView({ behavior: 'smooth' });
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
    function addResponse(model, response) {
      const timestamp = new Date().toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });
      const modelNames = {
        'qwen3': 'Qwen3',
        'deepseek': 'DeepSeek-Coder',
        'phi3': 'Phi-3'
      };
      
      const messageCard = document.createElement('div');
      messageCard.className = 'message-card';
      messageCard.innerHTML = `
        <div class="message-header">
          <div class="model-icon">${model === 'qwen3' ? 'ğŸ§ ' : model === 'deepseek' ? 'ğŸ’»' : 'ğŸ¤–'}</div>
          <div class="model-name">${modelNames[model]}</div>
        </div>
        <div class="message-content">${response}</div>
        <div class="message-timestamp">${timestamp}</div>
      `;
      
      document.getElementById('results-container').appendChild(messageCard);
      
      // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      messageCard.scrollIntoView({ behavior: 'smooth' });
    }
    
    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª
    function startRecording() {
      if (isRecording) {
        stopRecording();
        return;
      }
      
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        alert('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª');
        return;
      }
      
      navigator.mediaDevices.getUserMedia({ audio: true })
        .then(stream => {
          mediaRecorder = new MediaRecorder(stream);
          audioChunks = [];
          
          mediaRecorder.ondataavailable = event => {
            audioChunks.push(event.data);
          };
          
          mediaRecorder.onstop = () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
            // Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØª (Ø³ÙŠØªÙ… Ø¯Ø¹Ù…Ù‡ Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)
            alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª! Ø³ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡ Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.');
            const tracks = stream.getTracks();
            tracks.forEach(track => track.stop());
          };
          
          mediaRecorder.start();
          isRecording = true;
          event.target.innerHTML = 'â¹ï¸';
          alert('Ø¬Ø§Ø±Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„... Ø§Ø¶ØºØ· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ù„ØªÙˆÙ‚Ù.');
        })
        .catch(err => {
          console.error('Error accessing microphone:', err);
          alert('ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†: ' + err.message);
        });
    }
    
    function stopRecording() {
      if (mediaRecorder && mediaRecorder.state !== 'inactive') {
        mediaRecorder.stop();
        isRecording = false;
        event.target.innerHTML = 'ğŸ¤';
      }
    }
    
    // Ø±ÙØ¹ Ù…Ù„Ù
    function handleFileUpload() {
      const fileInput = document.getElementById('file-input');
      const file = fileInput.files[0];
      
      if (file) {
        // Ù‡Ù†Ø§ Ø³ÙŠÙØ¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ù„Ù (Ø³ÙŠØªÙ… Ø¯Ø¹Ù…Ù‡ Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)
        const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
        alert(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù:\nØ§Ù„Ø§Ø³Ù…: ${file.name}\nØ§Ù„Ø­Ø¬Ù…: ${fileSizeMB} MB\n\nØ³ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡ Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.`);
        fileInput.value = ''; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù„Ù
      }
    }
    
    // Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
    function compareModels() {
      alert('Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¯Ù…. Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ø³ØªØ¹Ø±Ø¶ Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø¶Ø¹Ù Ù„ÙƒÙ„ Ù†Ù…ÙˆØ°Ø¬.');
    }
    
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    function showSettings() {
      const settings = `
        Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
        â€¢ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø­Ù„ÙŠØ©: Ù…ÙØ¹Ù„Ø©
        â€¢ Ø§Ù„ÙˆØ¶Ø¹ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„: Ù…ÙØ¹Ù„
        â€¢ Ø§Ù„Ù„ØºØ©: Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        
        Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¯Ù….
      `;
      alert(settings);
    }
    
    // ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
    function updateConnectionStatus() {
      const status = document.getElementById('connection-status');
      const warning = document.getElementById('offline-warning');
      
      if (navigator.onLine) {
        status.innerHTML = 'âœ… Ù…ØªØµÙƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª';
        status.style.color = '#10b981';
        
        if (warning) {
          warning.innerHTML = 'âœ… Ù…ØªØµÙƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª';
          warning.style.backgroundColor = '#dcfce7';
          warning.style.color = '#166534';
        }
      } else {
        status.innerHTML = 'âŒ ÙˆØ¶Ø¹ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„';
        status.style.color = '#ef4444';
        
        if (warning) {
          warning.innerHTML = 'âœ… Ø§Ù„ÙˆØ¶Ø¹ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„ - ØªØ¹Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø­Ù„ÙŠØ©';
          warning.style.backgroundColor = '#dbeafe';
          warning.style.color = '#1e40af';
        }
      }
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    document.addEventListener('DOMContentLoaded', () => {
      updateConnectionStatus();
      
      // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
      window.addEventListener('online', updateConnectionStatus);
      window.addEventListener('offline', updateConnectionStatus);
      
      // Ø¶Ø¨Ø· Ø§Ø±ØªÙØ§Ø¹ textarea ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
      const textarea = document.getElementById('question-input');
      textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
      });
      
      // Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø§Ù„Ø²Ø± Enter
      textarea.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendQuestion();
        }
      });
    });
    
    // Ø¯Ø¹Ù… Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker registered:', reg))
          .catch(err => console.log('Service Worker failed:', err));
      });
    }
  </script>
</body>
</html>
