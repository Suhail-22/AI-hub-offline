<!-- تحديث قسم تسجيل الدخول في الـ HTML -->
<div class="modal" id="loginModal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-user-lock"></i> تسجيل الدخول</h3>
            <button class="close-modal" onclick="toggleLoginModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="login-tabs">
                <button class="login-tab active" id="emailTabBtn" onclick="openLoginTab('email')">
                    <i class="fas fa-envelope"></i> البريد الإلكتروني
                </button>
                <button class="login-tab" id="guestTabBtn" onclick="openLoginTab('guest')">
                    <i class="fas fa-user-clock"></i> وضع الزائر
                </button>
            </div>
            
            <!-- تسجيل الدخول بالبريد -->
            <div class="login-tab-content" id="emailLoginContent">
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> البريد الإلكتروني</label>
                    <input type="email" id="loginEmail" placeholder="example@email.com" class="form-input">
                </div>
                
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> كلمة المرور</label>
                    <div class="password-input">
                        <input type="password" id="loginPassword" placeholder="********" class="form-input">
                        <button type="button" class="show-password" onclick="togglePasswordVisibility()">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe">
                        <span>تذكرني</span>
                    </label>
                    <a href="#" class="forgot-password">نسيت كلمة المرور؟</a>
                </div>
                
                <button class="btn-primary btn-block" onclick="loginWithEmail()">
                    <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                </button>
                
                <div class="login-divider">
                    <span>أو سجل دخول باستخدام</span>
                </div>
                
                <div class="social-login">
                    <button class="social-btn google-btn" onclick="loginWithGoogle()">
                        <i class="fab fa-google"></i> Google
                    </button>
                    <button class="social-btn github-btn" onclick="loginWithGithub()">
                        <i class="fab fa-github"></i> GitHub
                    </button>
                </div>
                
                <p class="register-link">
                    ليس لديك حساب؟ <a href="#" onclick="showRegisterForm()">أنشئ حسابًا جديدًا</a>
                </p>
            </div>
            
            <!-- وضع الزائر -->
            <div class="login-tab-content" id="guestLoginContent" style="display: none;">
                <div class="guest-info">
                    <div class="guest-icon">
                        <i class="fas fa-user-clock"></i>
                    </div>
                    <h4>استكشاف التطبيق كزائر</h4>
                    <p>يمكنك استخدام جميع الميزات الأساسية دون تسجيل دخول. المحادثات تحفظ على جهازك فقط.</p>
                    
                    <div class="guest-features">
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>استخدام جميع النماذج</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>المحادثات تحفظ محليًا</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-times-circle"></i>
                            <span>لا مزامنة مع السحابة</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-times-circle"></i>
                            <span>لا حفظ للمحادثات بعد الخروج</span>
                        </div>
                    </div>
                    
                    <button class="btn-primary btn-block" onclick="continueAsGuest()">
                        <i class="fas fa-play"></i> المتابعة كزائر
                    </button>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <p class="privacy-notice">
                <i class="fas fa-shield-alt"></i>
                بياناتك محمية ولا تشارك مع أطراف ثالثة. 
                <a href="#" onclick="showPrivacyPolicy()">شروط الخصوصية</a>
            </p>
        </div>
    </div>
</div>

<script>
// دالة لتبديل علامات التبويب
function openLoginTab(tabName) {
    // تحديث الأزرار
    document.querySelectorAll('.login-tab').forEach(tab => tab.classList.remove('active'));
    document.getElementById(`${tabName}TabBtn`).classList.add('active');
    
    // تحديث المحتوى
    document.querySelectorAll('.login-tab-content').forEach(content => {
        content.style.display = 'none';
    });
    document.getElementById(`${tabName}LoginContent`).style.display = 'block';
}

// دالة إظهار/إخفاء كلمة المرور
function togglePasswordVisibility() {
    const passwordInput = document.getElementById('loginPassword');
    const eyeIcon = document.querySelector('.show-password i');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.className = 'fas fa-eye-slash';
    } else {
        passwordInput.type = 'password';
        eyeIcon.className = 'fas fa-eye';
    }
}
</script>
